<link rel="import" href="../bower_components/polymer/polymer.html">
<script src="chartlib/d3.min.js" charset="utf-8"></script>
<script src="chartlib/c3.js"></script>
<polymer-element name="c3-timeseries" verify attributes='columns'>
<template>
	<link href="chartlib/c3.css" rel="stylesheet" type="text/css">
	<style>
		#ch{
			background-color:#fff;
			color:#000;
			margin:0 auto;
		}
		#ch .c3-line-data1 {
		  stroke-width: 5px;
		}
	</style>
	<div id='ch' style="width:{{width}};height:{{height}}"></div>
</div>
</template>
<script>
(function(){
	Polymer({
		columns:'',
		width:'720px',
		height:'300px',
		ready:function(){
			var my = this;
	    },
	    columnsChanged:function(){
	    	var data = JSON.parse(this.columns);
	    	if(typeof data ==='object'){
	    		this.render(data);
	    	}
	    },
	    render:function(data){
	    	var my = this;
	    	var obj = {};
	    	obj['bindto'] = my.$.ch,
	    	obj['data'] = {
		        x: 'x',
		        xFormat: '%Y/%m/%d', // 'xFormat' can be used as custom format of 'x'
		        columns: []
		    };
	    	obj['axis'] = {
		        x: {
		            type: 'timeseries',
		            tick: {
		                format: '%Y/%m/%d'
		            }
		        }
    		};
    		data[0].splice(0, 0, "x");
    		obj['data']['columns'] = data;
    		c3.generate(obj);
	    }
	});
})();
</script>
</polymer-element>